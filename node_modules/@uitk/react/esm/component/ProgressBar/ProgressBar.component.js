import{__rest as e}from'tslib';import r,{useEffect as o}from'react';import n,{css as t,keyframes as a}from'styled-components';import{TrackingConstants as i}from'../../constant.js';import'../../external/@babel/runtime/helpers/slicedToArray.js';import{calc as s}from'../../styles/calc.js';import{lighten as c}from'polished';import{announce as l}from'@react-aria/live-announcer';import m from'classnames';import{AlertFilled as p,CheckmarkFilled as u}from'@uitk/react-icons';import{Label as g}from'../Label/Label.component.js';import{useTracking as d}from'../TrackingProvider/TrackingProvider.component.js';import{HelperText as f}from'../HelperText/HelperText.component.js';var v=a(["0%{background-position:right bottom;}100%{background-position:left bottom;}"]),h=n(p).withConfig({displayName:"ProgressBarcomponent__ProgressAlert",componentId:"sc-12ti682-0"})(["margin:0 ",";"],(function(e){return e.theme.spacing.xs.value})),b=n(u).withConfig({displayName:"ProgressBarcomponent__ProgressComplete",componentId:"sc-12ti682-1"})(["margin:0 ",";"],(function(e){return e.theme.spacing.xs.value})),w=n.div.withConfig({displayName:"ProgressBarcomponent__ProgressBarContent",componentId:"sc-12ti682-2"})(["",""],(function(e){var r=e.theme.spacing;return"\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin: ".concat(r.sm.value," 0 ").concat(r.m.value," 0;\n    height: ").concat(r.base.value,";\n  ")})),P=n(g).withConfig({displayName:"ProgressBarcomponent__ProgressLabel",componentId:"sc-12ti682-3"})(["margin-right:",";"],(function(e){return e.theme.spacing.xs.value})),_=n.div.withConfig({displayName:"ProgressBarcomponent__ProgressLabelContainer",componentId:"sc-12ti682-4"})(["display:flex;flex-direction:row;"]),y=n.span.withConfig({displayName:"ProgressBarcomponent__ProgressText",componentId:"sc-12ti682-5"})(["",""],(function(e){var r=e.theme,o=r.color,n=r.font;return t(["color:",";font-size:",";font-weight:",";"],o.text.primary.value,n.size.form.label.value,n.weight.strong.value)})),B=n.span.withConfig({displayName:"ProgressBarcomponent__ProgressErrorLabel",componentId:"sc-12ti682-6"})(["",""],(function(e){var r=e.theme,o=r.color,n=r.font;return t(["color:",";font-size:",";font-weight:",";"],o.semantic.error.base.value,n.size.form.label.value,n.weight.strong.value)})),x=n.span.withConfig({displayName:"ProgressBarcomponent__ProgressCompleteLabel",componentId:"sc-12ti682-7"})(["",""],(function(e){var r=e.theme,o=r.color,n=r.font;return t(["color:",";font-size:",";font-weight:",";"],o.semantic.success.base.value,n.size.form.label.value,n.weight.strong.value)})),C=n.progress.withConfig({displayName:"ProgressBarcomponent__ProgressBarHidden",componentId:"sc-12ti682-8"})(["appearance:none;border:none;width:0;height:0;"]),E=t(["margin-right:",";"],(function(e){return e.theme.spacing.lg.value})),k=n.div.withConfig({displayName:"ProgressBarcomponent__ProgressBarIndicator",componentId:"sc-12ti682-9"})(["",""],(function(e){var r=e.complete,o=e.error,n=e.theme,a=n.color,i=n.font;n.spacing;var c=n.border,l=n.opacity;return t(["width:100%;outline:none;position:relative;box-shadow:inset 0 0 "," 0 rgba(",",",");height:",";border-radius:4px;background-color:",";overflow:hidden;",""],c.width.large.value,a.shadow.accessible.value,l.high.value,s(i.size.body.base.value,.5),a.background.accent.subtle.value,!r&&!o&&E)})),N=t(["transition:none;"]),I=t(["transition:width 0.5s ease-out;"]),z=t(["background:",";",";"],(function(e){return e.theme.color.semantic.success.base.value}),N),L=t(["width:100%;background:",";",";"],(function(e){return e.theme.color.semantic.error.base.value}),N),j=n.div.withConfig({displayName:"ProgressBarcomponent__ProgressBarFill",componentId:"sc-12ti682-10"})(["",""],(function(e){var r=e.complete,o=e.error,n=e.progress,a=e.theme,i=a.animation,l=a.color,m=a.font;return t(["position:absolute;width:",";",";height:",";border-radius:4px;background:linear-gradient( to right,"," 33%,",","," 66% ) center;background-size:300% 100%,cover;animation-name:",";animation-duration:",";animation-iteration-count:infinite;@media (prefers-reduced-motion){animation:none;}"," ",""],1.06*n+"%",0===n?N:I,s(m.size.body.base.value,.5),l.background.primary.base.value,c(.3,l.background.primary.base.value),l.background.primary.base.value,v,s(i.duration.animate.medium.value,10),r&&z,o&&L)})),T=n((function(n){n.children;var t=n.className,a=n.config,s=n.id,c=e(n,["children","className","config","id"]),p=d(),u=a.complete,g=void 0!==u&&u,v=a.completeLabel,E=void 0===v?"Complete":v,N=a.error,I=void 0!==N&&N,z=a.errorLabel,L=void 0===z?"Error":z,T=a.helperText,A=a.initialLabel,H=a.label,F=void 0===H?"Progress":H,M=a.liveAnnouncerInterval,O=void 0===M?25:M,q=a.liveAnnouncerMessage,D=a.progress;return o((function(){p.mount(i.components.ProgressBar.id)}),[p]),o((function(){if(D%O==0){var e=0===D?"":q||"".concat(D," percent complete");l(e)}}),[D]),r.createElement("div",Object.assign({className:m("uitk-progress-bar",t)},c),r.createElement(_,null,r.createElement(P,{error:I},A&&0===D?A:F),!I&&!g&&r.createElement(y,null,"(".concat(D,"%)")),r.createElement("span",{"aria-live":"assertive"},I&&r.createElement(B,null,L)),!I&&g&&r.createElement(x,null,E)),T&&r.createElement(f,null,T),r.createElement(w,null,r.createElement(C,{id:s,max:100,value:D}),r.createElement(k,{error:I,complete:g},r.createElement(j,{progress:D,error:I,complete:g})),I&&r.createElement(h,{size:"s"}),g&&r.createElement(b,{size:"s"})))})).withConfig({displayName:"ProgressBarcomponent__ProgressBar",componentId:"sc-12ti682-11"})([""]);export{T as ProgressBar};
