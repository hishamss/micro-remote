import e from'../../external/@babel/runtime/helpers/slicedToArray.js';import{__rest as o}from'tslib';import n,{useEffect as t,useRef as i,useState as a}from'react';import r,{css as l}from'styled-components';import{PaginationPosition as g,ErrorBounds as s}from'./types.js';import{TrackingConstants as c,Breakpoint as p}from'../../constant.js';import u from'classnames';import{PaginationEntries as m}from'./PaginationEntries/PaginationEntries.component.js';import{PaginationNavigation as d}from'./PaginationNav/PaginationNav.component.js';import{useTracking as P}from'../TrackingProvider/TrackingProvider.component.js';import{useControllableState as f}from'../../hook/useControllableState/useControllableState.js';var v=l(["justify-content:space-between;"]),T=l(["justify-content:flex-end;"]),E=r.div.withConfig({displayName:"Paginationcomponent__PaginationContent",componentId:"eld2ko-0"})(["position:relative;"]),x=r.nav.withConfig({displayName:"Paginationcomponent__PaginationContainer",componentId:"eld2ko-1"})(["",""],(function(e){var o=e.isEntriesSpecified;return l(["display:flex;flex-direction:column;@media ","{flex-direction:row;"," "," align-items:center;}"],p.m,o&&v,!o&&T)})),O=r((function(r){var l=r.children,p=r.className,v=r.config,T=r.entriesPerPageConfig,O=r.id,b=r.onPageChange,C=r.page,h=o(r,["children","className","config","entriesPerPageConfig","id","onPageChange","page"]),y=P();t((function(){y.mount(c.components.Pagination.id)}),[y]);var B=v.displayTextAs,N=v.enableGotoPage,_=void 0!==N&&N,j=v.getPaginationText,M=v.gotoPageButtonText,S=void 0===M?"Go":M,G=v.gotoPageLabel,k=void 0===G?"Go To Page":G,w=v.nextButtonText,I=void 0===w?"Next":w,A=v.onGotoPageError,R=v.onNextError,z=void 0===R?"There are no more pages":R,L=v.onPrevError,D=void 0===L?"There are no previous pages":L,V=v.pageSize,q=void 0===V?25:V,F=v.prevButtonText,H=void 0===F?"Previous":F,J=v.totalItemsCount,K=f(C,b,1),Q=e(K,2),U=Q[0],W=Q[1],X=new Map([[g.TOP,i()],[g.BOTTOM,i()]]),Y=a(T&&function(e,o){var n;return null!==(n=e.filter((function(e){return e.value===o}))[0])&&void 0!==n?n:e[0]}(T.pageSizeOptions,T.initialValue)),Z=e(Y,2),$=Z[0],ee=Z[1],oe=function(e){ee(e),W(1),ae(null)},ne=a(null),te=e(ne,2),ie=te[0],ae=te[1],re=function(e,o,n,t){!function(e,o,n,t){return e<=Math.ceil(o/((null==n?void 0:n.value)||t))&&e>0}(e,J,$,q)?ae({position:o,boundary:n}):(W(e),ae(null),t&&(X.get(o).current.value="")),_&&function(e){var o=e===g.TOP?g.BOTTOM:g.TOP;X.get(o).current.value=""}(o)},le={page:U,totalPages:Math.ceil(J/((null==$?void 0:$.value)||q)),onPrev:function(e){re(U-1,e,s.START)},onNext:function(e){re(U+1,e,s.END)},onGotoPage:function(e,o){re(o,e,s.RANGE,!0)},getPaginationText:j,prevButtonText:H,nextButtonText:I,displayTextAs:B,onPrevError:D,onNextError:z,gotoPageButtonText:S,gotoPageLabel:k,onGotoPageError:A,enableGotoPage:_};return n.createElement("div",Object.assign({id:O,className:u("uitk-pagination",p)},h),n.createElement(x,{isEntriesSpecified:Boolean(T),"aria-label":"pagination "+g.TOP},T&&n.createElement(m,{id:"".concat(O,"_epp-top"),entriesPerPageConfig:T,onEntriesChange:oe,selectedEntriesPerPage:$}),n.createElement(d,Object.assign({id:"".concat(O,"_navigation_top"),position:g.TOP,error:(null==ie?void 0:ie.position)===g.TOP&&ie,gotoInputRef:null==X?void 0:X.get(g.TOP)},le))),n.createElement(E,null,"function"==typeof l?l({page:U,pageSize:(null==$?void 0:$.value)||q}):l),n.createElement(x,{isEntriesSpecified:Boolean(T),"aria-label":"pagination "+g.BOTTOM},T&&n.createElement(m,{id:"".concat(O,"_epp-bottom"),entriesPerPageConfig:T,onEntriesChange:oe,selectedEntriesPerPage:$}),n.createElement(d,Object.assign({id:"".concat(O,"_navigation_bottom"),position:g.BOTTOM,error:(null==ie?void 0:ie.position)===g.BOTTOM&&ie,gotoInputRef:null==X?void 0:X.get(g.BOTTOM)},le))))})).withConfig({displayName:"Paginationcomponent__Pagination",componentId:"eld2ko-2"})(["display:flex;flex-direction:column;"]);export{O as Pagination};
