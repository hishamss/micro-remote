import e from'../../external/@babel/runtime/helpers/slicedToArray.js';import{__rest as t}from'tslib';import n,{useState as r,useMemo as o,useRef as i,useEffect as a}from'react';import u,{css as c,keyframes as l}from'styled-components';import{usePopper as p}from'react-popper';import{useButton as s}from'@react-aria/button';import{Z_INDEX as m,Key as f}from'../../constant.js';import{useVisuallyHidden as d}from'@react-aria/visually-hidden';import v from'react-dom';import b from'classnames';var h=u.button.withConfig({displayName:"Tooltipcomponent__TooltipTrigger",componentId:"exjipk-0"})(["",""],(function(e){var t=e.theme,n=t.border,r=t.boxshadow;return c(["cursor:pointer;background:none;outline:none;border-radius:",";border:"," solid transparent;padding:0;line-height:0px;vertical-align:text-bottom;&:active,&:focus{box-shadow:",";}"],n.radius.form.element.value,n.width.base.value,r.form.focus.value)})),g=["mouseenter"],x=["mouseleave","blur","keyup"],y=u.div.withConfig({displayName:"Tooltipcomponent__Arrow",componentId:"exjipk-1"})(["",""],(function(e){var t=e.theme.color;return c(['cursor:pointer;&,&::before{position:absolute;width:12px;height:12px;z-index:-1;}&::before{content:"";transform:rotate(45deg);background:',";}"],t.text.base.value)})),w=function(e){return e.key},E=function(e){return"keyup"===e.type&&e.key===f.ESC},k=function(e,t){return e&&t()},T=function(u){var c=u.children,l=u.className,m=u.content,f=u.maxWidth,T=void 0===f?"260px":f,L=u.placement,N=void 0===L?"top":L,_=u.tooltipParentSelector,P=u.visible,C=t(u,["children","className","content","maxWidth","placement","tooltipParentSelector","visible"]),O=r(null),z=e(O,2),W=z[0],I=z[1],S=r(!1),A=e(S,2),F=A[0],H=A[1],q=r(!1),B=e(q,2),D=B[0],G=B[1],J=r(!1),K=e(J,2),M=K[0],Q=K[1],R=function(){return H(!0)},U=o((function(){return e=H,function(t){w(t)?E(t)&&e(!1):e(!1)};var e}),[H]),V=o((function(){return function(){var e,t;e=function(){return H((function(e){return!e}))},t=function(){return Q((function(e){return!e}))},D?t():e()}}),[D]),X=o((function(){return function(e){G(!1),k(!M,(function(){return te.current=window.setTimeout((function(){return U(e)}),500)}))}}),[M,U]),Y=o((function(){return function(){G(!0),k(F,(function(){return clearTimeout(te.current)})),k(!F,(function(){return R()}))}}),[F]),Z=o((function(){return function(e){k(function(e){return function(e){return"blur"===e.type}(e)||w(e)&&E(e)}(e),(function(){return Q(!1)})),k(!D,(function(){return U(e)}))}}),[D,U]),$=i(null),ee=i(null),te=i(),ne=p($.current,ee.current,{placement:N,modifiers:[{name:"arrow",options:{element:W,padding:10}},{name:"offset",options:{offset:[0,8]}}]}),re=ne.attributes,oe=ne.styles,ie=s({onPress:V},$).buttonProps,ae=$&&ee&&void 0===P;a((function(){if(ae){var e=[];if(F){var t=ee.current;ee.current.addEventListener("mouseenter",Y),ee.current.addEventListener("mouseleave",X),e.push((function(){return null==t?void 0:t.removeEventListener("mouseenter",Y)}),(function(){return null==t?void 0:t.removeEventListener("mouseleave",X)}))}var n=g.map((function(e){var t,n,r=$.current,o=(t=Y,n=R,"mouseenter"===e?t:n);return r.addEventListener(e,o),function(){return null==r?void 0:r.removeEventListener(e,o)}})),r=x.map((function(e){var t,n,r,o=$.current,i=(n=Z,r=X,"keyup"===(t=e)||"blur"===t?n:r);return o.addEventListener(e,i),function(){return null==o?void 0:o.removeEventListener(e,i)}}));return function(){[e,n,r].forEach((function(e){return e.forEach((function(e){return e()}))}))}}}),[P,$,ee,F,U,ae,Y,X,Z]);var ue=d().visuallyHiddenProps;return n.createElement(n.Fragment,null,n.createElement(h,Object.assign({className:b("uitk-tooltip-trigger",l),ref:$},ie),c,n.createElement("span",Object.assign({},ue),"Tooltip"),n.createElement("span",Object.assign({},ue),m)),n.createElement("span",{"aria-live":"polite"},(null!=P?P:F)?function(e,t){return t?v.createPortal(e,t()):e}(n.createElement(j,Object.assign({role:"tooltip",ref:ee,style:oe.popper},re.popper,C,{maxWidth:T}),m,n.createElement(y,{ref:I,style:oe.arrow})),_):null))},j=u.div.withConfig({displayName:"Tooltipcomponent__TooltipContent",componentId:"exjipk-2"})(["",""],(function(e){var t=e.maxWidth,n=e.theme,r=n.animation,o=n.border,i=n.color,a=n.elevation,u=n.font,l=n.spacing;return c(["cursor:pointer;background:",";color:",";font-weight:",";font-family:",";padding:",";font-size:",";border-radius:",";box-shadow:",";animation:"," ",";transition:opacity 0.25s linear;z-index:",";max-width:",';white-space:pre-wrap;word-wrap:break-word;&[data-popper-reference-hidden="true"]{opacity:0;}&[data-popper-placement^="top"] > ','{bottom:-4px;}&[data-popper-placement^="bottom"] > ','{top:-4px;}&[data-popper-placement^="left"] > ','{right:-4px;}&[data-popper-placement^="right"] > ',"{left:-4px;}"],i.text.base.value,i.text.inverse.value,u.weight.base.value,u.family.base.value,l.sm.value,u.size.body.base.value,o.radius.base.value,a.medium.value,L,r.duration.animate.medium.value,m.ONE,t,y,y,y,y)})),L=l(["from{opacity:0;}to{opacity:1;}"]);export{T as Tooltip,j as TooltipContent,T as default};
