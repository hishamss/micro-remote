import{__rest as e}from'tslib';import o,{useRef as t,useContext as n}from'react';import r,{css as a,ThemeContext as l}from'styled-components';import{useButton as i}from'@react-aria/button';import c from'classnames';import{Z_INDEX as s}from'../../../constant.js';import{headerAndCellStyles as d}from'../styles.js';import{useTableActions as u,useTableState as m,useTableConfig as p,useTableExpandableContent as b}from'../TableContext/TableContext.component.js';import f from'../../../external/@uitk/react-icons/esm/SortAscending.js';import v from'../../../external/@uitk/react-icons/esm/SortDescending.js';import h from'../../../external/@uitk/react-icons/esm/SortUnsorted.js';var k=a(["",""],(function(e){var o=e.theme,t=o.border,n=o.color;return a(["background:",";border-right:"," solid ",";width:1px;"],n.background.table.row.accent.subtle.value,t.width.base.value,n.border.base.value)})),g=a(["",""],(function(e){var o=e.theme.color;return a(["background:",";border-bottom:2px solid black;border-top:none;font-size:0.875rem;color:",";"],o.background.table.row.accent.slight.value,o.text.table.row.value)})),y=a(["",""],(function(e){var o=e.theme,t=o.border,n=o.color,r=e.topOffset,l=e.isSticky,i=e.zIndex;return a(["border-top:"," solid ",";border-bottom:2px solid ",";background:",";top:",";z-index:",";",""],t.width.base.value,n.border.base.value,n.border.brand.base.value,n.background.base.value,r||"0px",i||"".concat(s.EIGHT),l&&"position: sticky;")})),x=r.th.withConfig({displayName:"TableHeadercomponent__TableHeaderCell",componentId:"sc-1smpg2l-0"})(["",""],(function(e){var o=e.isExpandHeaderCell,t=e.nested;return a(["",";"," ",";",""],d,y,o&&k,t&&g)})),C=r.th.withConfig({displayName:"TableHeadercomponent__TableHeaderSortCell",componentId:"sc-1smpg2l-1"})(["",""],(function(e){var o=e.theme.color,t=e.nested,n=e.sortSelected;return a(["&.focused{","{outline:3px solid ",";outline-offset:-3px;background-color:transparent;}}"," "," "," ",";"],S,o.border.primary.base.value,y,t&&g,n&&!t&&"background-color: ".concat(o.background.table.header.accent.value,";"),n&&t&&"background-color: ".concat(o.background.table.nested.header.accent.value,";"))})),w=function(e){var t=e.ascending,r=e.columnKey;e.nested;var a=e.sortColumn,i=n(l);return a===r?t?o.createElement(f,{fill:i.color.text.table.header.value}):o.createElement(v,{fill:i.color.text.table.header.value}):o.createElement(h,{fill:i.color.text.table.header.value})},S=r((function(n){var r=n.children,a=n.className,l=e(n,["children","className"]),c=t(),s=i(l,c).buttonProps;return o.createElement("button",Object.assign({},s,{ref:c,className:a}),r)})).withConfig({displayName:"TableHeadercomponent__TableHeaderSortButton",componentId:"sc-1smpg2l-2"})(["",";width:100%;background:none;color:inherit;border:none;cursor:pointer;outline:none;font:inherit;display:flex;flex-direction:row;align-items:center;"],d),E=r.span.withConfig({displayName:"TableHeadercomponent__SortHeaderText",componentId:"sc-1smpg2l-3"})(["",""],(function(e){var o=e.theme.spacing;return a(["padding-right:",";"],o.xxs.value)})),I=r((function(e){var n,r,a,l=e.captionId,i=e.className,s=e.onSort,d=u(),f=m(),v=p(),h=b(),k=t(),g=v.columns.map((function(e){var t,n,r,a,i,u,m,p,b,h,k,g=null!==(t=e.key)&&void 0!==t?t:e.label;return p=e,b=v.sort,h=p.key,(k=p.sortColumn)||b&&!1!==k&&h?o.createElement(C,{sortSelected:f.sortColumn===e.key,scope:"col",key:g,className:c({focused:e.key===f.focusedColumn}),isSticky:null===(n=v.sticky)||void 0===n?void 0:n.headerSticky,topOffset:null===(r=v.sticky)||void 0===r?void 0:r.headerOffset,zIndex:null===(a=v.sticky)||void 0===a?void 0:a.headerIndex,nested:v.nested},o.createElement(S,{nested:v.nested,onPress:function(){return function(e,t,n,r,a,l,i){var c,s,d=window.scrollY,u=e!==a.sortColumn||!a.isSortAscending;null==i||i(u,t,e),n.sort({columnId:e,sortFn:l||r.sortFn}),n.setCaptionDescription((null===(c=r.caption)||void 0===c?void 0:c.getSortCaptionDescription)?o.createElement("span",{"aria-live":"polite","aria-atomic":"true"},null===(s=r.caption)||void 0===s?void 0:s.getSortCaptionDescription(t,u)):o.createElement("span",{"aria-live":"polite","aria-atomic":"true"},function(e,o){return o?"Column "+e+" is sorted in ascending order":"Column "+e+" is sorted in descending order"}(t,u))),window.scrollTo(0,d)}(e.key,e.label,d,v,f,e.sortFn,s)},onFocusChange:function(o){return function(e,o){return d.setFocusedColumn(e?o:null)}(o,e.key)},"aria-describedby":f.sortColumn===e.key?l:null},o.createElement(E,null,e.label),o.createElement(w,{sortColumn:f.sortColumn,columnKey:e.key,ascending:f.isSortAscending,nested:v.nested}))):o.createElement(x,{scope:"col",key:g,isSticky:null===(i=v.sticky)||void 0===i?void 0:i.headerSticky,topOffset:null===(u=v.sticky)||void 0===u?void 0:u.headerOffset,zIndex:null===(m=v.sticky)||void 0===m?void 0:m.headerIndex,nested:v.nested},e.label)}));return h&&g.unshift(o.createElement(x,{ref:k,scope:"col",key:"expand-row-header",isExpandHeaderCell:!0,isSticky:null===(n=v.sticky)||void 0===n?void 0:n.headerSticky,topOffset:null===(r=v.sticky)||void 0===r?void 0:r.headerOffset,zIndex:null===(a=v.sticky)||void 0===a?void 0:a.headerIndex,nested:v.nested},h.columnHeaderText||"More")),o.createElement("thead",{className:i},o.createElement("tr",null,g))})).withConfig({displayName:"TableHeadercomponent__TableHeader",componentId:"sc-1smpg2l-4"})(["",""],(function(e){var o=e.theme,t=o.color,n=o.font;return a(["background:",";color:",";font-weight:",";",";"],t.background.table.header.value,t.text.table.header.value,n.weight.medium.value,d)}));export{I as TableHeader};
