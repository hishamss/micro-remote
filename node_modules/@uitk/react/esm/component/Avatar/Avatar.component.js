import{__rest as e}from'tslib';import a,{useEffect as t,useContext as n}from'react';import r,{css as i,ThemeContext as o}from'styled-components';import{TrackingConstants as l}from'../../constant.js';import c from'classnames';import{Community as s,Person as u}from'@uitk/react-icons';import'../../external/@babel/runtime/helpers/slicedToArray.js';import{calc as d}from'../../styles/calc.js';import{math as m}from'polished';import{useVisuallyHidden as v}from'@react-aria/visually-hidden';import h from'../../external/@uitk/react-icons/esm/NewWindow.js';import{useTracking as f}from'../TrackingProvider/TrackingProvider.component.js';var g=r.span.withConfig({displayName:"Avatarcomponent__H2Style",componentId:"dvca7c-0"})(["",""],(function(e){var a=e.theme,t=a.font,n=a.color;return i(["line-height:1;font-family:",";font-size:",";font-weight:",";color:",";"],t.family.heading.h2.value,t.size.heading.h2.value,t.weight.heading.h2.value,n.text.heading.h2.value)})),p=r.span.withConfig({displayName:"Avatarcomponent__H3Style",componentId:"dvca7c-1"})(["",""],(function(e){var a=e.theme,t=a.font,n=a.color;return i(["line-height:1;font-family:",";font-size:",";font-weight:",";color:",";"],t.family.heading.h3.value,t.size.heading.h3.value,t.weight.heading.h3.value,n.text.heading.h3.value)})),b=r.span.withConfig({displayName:"Avatarcomponent__H6Style",componentId:"dvca7c-2"})(["",""],(function(e){var a=e.theme,t=a.font,n=a.color;return i(["line-height:1;font-family:",";font-size:",";font-weight:",";color:",";"],t.family.heading.h6.value,t.size.heading.h6.value,t.weight.heading.h6.value,n.text.heading.h6.value)})),x={xs:"1.5rem",s:"2rem",m:"3rem",l:"4rem",xl:"5rem",xxl:"6rem"},w={xs:b,s:b,m:p,l:p,xl:p,xxl:g},k=function(e,a,t,n,r){return e||(a&&t&&!n&&r||"")},y=function(e,a){return!(e&&!a)||null},z=function(e){var t=e.src,r=e.size,i=void 0===r?"m":r,l=e.variant,c=e.initials,s=e.placeHolderIcon,u=e.backgroundColor,d=e.label,m=e.subLabel,f=e.labelAlign,g=e.customSize,p=e.hideLabel,b=e.linkUrl,x=e.alt,z=e.newTab,A=e.isButtonContent,_=void 0!==A&&A,C=v().visuallyHiddenProps,I=n(o);return a.createElement(Y,{as:_&&"span",labelAlign:f,linkUrl:b},t?a.createElement(ee,{as:_&&"span",size:i,variant:l,customSize:g,className:"container"},a.createElement(ae,{"data-testid":"avatar-img",alt:k(x,t,p,_,d),"aria-hidden":y(p,_),src:t,variant:l})):a.createElement(V,{"data-testid":"avatar-wrapper",as:_&&"span",variant:l,size:i,backgroundColor:u,customSize:g},!c&&(s||F(l,d,p)),a.createElement(R,{as:_&&"span","aria-hidden":"true",variant:l,"data-testid":"inital-wrapper",size:i,backgroundColor:u},null==c?void 0:c.slice(0,2))),!p&&a.createElement($,{labelAlign:f,"data-testid":"label-wrapper"},a.createElement(K,{size:i,linkUrl:b,as:w[i],"data-testid":"avatar-label"},d,z&&a.createElement(a.Fragment,null,a.createElement(h,{stroke:I.color.link.base.value,strokeWidth:"1.2"}),a.createElement("span",Object.assign({},C),"Opens in a new window"))),m&&a.createElement(Z,{labelAlign:f},m)))},A=function(n){var r=n.src,i=n.className,o=n.size,s=void 0===o?"m":o,u=n.initials,d=n.placeHolderIcon,m=n.backgroundColor,v=n.label,h=n.linkUrl,g=n.variant,p=n.subLabel,b=n.labelAlign,x=n.alt,w=n.hideLabel,k=n.newTab,y=n.customSize,A=n.isButtonContent,_=e(n,["src","className","size","initials","placeHolderIcon","backgroundColor","label","linkUrl","variant","subLabel","labelAlign","alt","hideLabel","newTab","customSize","isButtonContent"]),C=f();return t((function(){C.mount(l.components.Avatar.id)}),[C]),a.createElement(a.Fragment,null,h?a.createElement(M,{"data-testid":"avatar-link",linkUrl:h,newTab:k,className:i,role:u?"img":null},a.createElement(z,{initials:u,labelAlign:b,size:s,label:v,subLabel:p,backgroundColor:m,placeHolderIcon:d,alt:v,src:r,linkUrl:h,variant:g,customSize:y,newTab:k})):a.createElement(Q,Object.assign({as:A&&"span","data-testid":"avatar","aria-label":w&&u?v:null,role:u&&w&&"img",className:c("uitk-avatar",i)},_),a.createElement(z,{initials:u,labelAlign:b,size:s,label:v,subLabel:p,backgroundColor:m,placeHolderIcon:d,alt:x,src:r,variant:g,customSize:y,hideLabel:w,linkUrl:h,isButtonContent:A})))},_=i(["",""],(function(e){var a=e.theme.color;return i(["background:",";"],a.semantic.info.base.value)})),C=i(["",""],(function(e){var a=e.theme.color;return i(["background:",";"],a.background.primary.base.value)})),I=i(["",""],(function(e){var a=e.theme.color;return i(["background:",";"],a.semantic.success.base.value)})),N=i(["",""],(function(e){var a=e.theme.color;return i(["background:",";"],a.link.base.value)})),E=i(["",""],(function(e){var a=e.theme.color;return i(["background:",";"],a.text.secondary.value)})),L=i(["",""],(function(e){var a=e.theme.color;return i(["background:",";"],a.text.base.value)})),S=i(["flex-direction:row;"]),j=i(["flex-direction:column;justify-content:center;"]),H=i(["margin-top:",";"],(function(e){return e.theme.spacing.xs.value})),U=i(["margin-left:",";"],(function(e){return e.theme.spacing.xs.value})),T=i(["border-radius:50%;"]),W=i(["border-radius:",";"],(function(e){return e.theme.spacing.xxs.value})),B=i(["align-self:start;"]),O=i(["align-self:center;"]),P=function(e){return"square"===e?W:T},q=function(e){switch(e){case"primary":return C;case"secondary":return L;case"neutral":return E;case"success":return I;case"info":return _;case"link":return N;default:return C}},F=function(e,t,n){return"square"===e?a.createElement(s,{"data-testid":"community-icon",ariaLabel:n&&t,ariaHidden:!n}):a.createElement(u,{"data-testid":"person-icon",ariaLabel:n&&t,ariaHidden:!n})},D=i(["",""],(function(e){var a=e.theme,t=a.border,n=a.color;return i(["border-radius:",";box-shadow:0 0 0 3px ",";color:",";outline:none;text-decoration:none;"],t.radius.base.value,n.focus.value,n.text.brand.value)})),G=function(t){var n=t.children,r=t.linkUrl,i=t.newTab,o=e(t,["children","linkUrl","newTab"]);return a.createElement("a",Object.assign({href:r,target:i&&"_blank"},o),n)},J=i(["color:",";"],(function(e){return e.theme.color.link.base.value})),K=r.div.withConfig({displayName:"Avatarcomponent__AvatarLabel",componentId:"dvca7c-3"})(["",""],(function(e){var a=e.size,t=e.theme,n=t.color,r=t.font,o=t.spacing;return i(["display:flex;margin:0;svg{align-self:flex-start;fill:",";color:",";width:",";margin:0 0 "," ",";}"],n.link.base.value,n.link.base.value,"xxl"==a||"xl"==a||"l"==a?r.size.body.base.value:m(r.size.body.base.value+"* 0.75"),o.xxs.value,o.xxs.value)})),M=r(G).withConfig({displayName:"Avatarcomponent__AvatarLink",componentId:"dvca7c-4"})(["",""],(function(e){return i(["background-color:transparent;text-decoration:none;text-decoration-color:",";","{text-decoration:underline;",";}&:hover,&:focus{outline:none;","{",";}","{text-decoration:none;}}"],(function(e){return e.theme.color.link.base.value}),K,e&&J,Y,e&&D,K)})),Q=r.div.withConfig({displayName:"Avatarcomponent__AvatarWrapper",componentId:"dvca7c-5"})(["display:flex;text-decoration:none;background:transparent;"]),R=r.div.withConfig({displayName:"Avatarcomponent__CharacterWrapper",componentId:"dvca7c-6"})(["",""],(function(e){var a=e.theme,t=a.font,n=a.color,r=e.size,o=void 0===r?"m":r,l=e.variant,c=e.backgroundColor;return i(["color:",";font-weight:",";max-width:100%;font-size:",";text-transform:uppercase;",";",";"],n.text.contrast.brand.value,t.weight.strong.value,d(x[o],.45),P(l),q(c))})),V=r.div.withConfig({displayName:"Avatarcomponent__PlaceHolderWrapper",componentId:"dvca7c-7"})(["",""],(function(e){var a=e.theme.color,t=e.size,n=e.backgroundColor,r=e.customSize,o=e.variant;return i(["display:flex;color:",";background-color:",";align-items:center;justify-content:center;width:",";height:",";min-width:",";min-height:",";",";",";svg{fill:",";width:65%;height:auto;justify-content:center;align-self:center;}"],a.text.contrast.brand.value,a.background.brand.base.value,r||x[t],r||x[t],r||x[t],r||x[t],q(n),P(o),a.text.contrast.brand.value)})),X=i(["padding:",";"],(function(e){return e.theme.spacing.xs.value})),Y=r.div.withConfig({displayName:"Avatarcomponent__InnerWrapper",componentId:"dvca7c-8"})(["",""],(function(e){var a=e.labelAlign,t=e.linkUrl;return i(["display:inline-flex;",";align-items:center;",";"],t&&X,function(e){switch(e){case"right":return S;case"bottom":return j;default:return S}}(a))})),Z=r.span.withConfig({displayName:"Avatarcomponent__SubLabel",componentId:"dvca7c-9"})(["",""],(function(e){var a=e.labelAlign,t=e.theme.color;return i(["margin:0;align-self:center;",";color:",";"],function(e){switch(e){case"right":return B;case"bottom":return O;default:return B}}(a),t.text.base.value)})),$=r.div.withConfig({displayName:"Avatarcomponent__LabelsWrapper",componentId:"dvca7c-10"})(["",""],(function(e){var a=e.labelAlign;return i(["display:flex;flex-direction:column;",";"],function(e){switch(e){case"right":return U;case"bottom":return H;default:return U}}(a))})),ee=r.div.withConfig({displayName:"Avatarcomponent__ImgWrapper",componentId:"dvca7c-11"})(["",""],(function(e){var a=e.size,t=e.variant,n=e.customSize;return i(["width:",";height:",";min-width:",";min-height:",";",";"],n||x[a],n||x[a],n||x[a],n||x[a],P(t))})),ae=r.img.withConfig({displayName:"Avatarcomponent__AvatarImage",componentId:"dvca7c-12"})(["",""],(function(e){var a=e.theme.color,t=e.variant;return i(["box-shadow:inset 0 0 4px 0 ",";width:100%;height:100%;min-height:100%;min-width:100%;max-height:100%;object-fit:cover;",";"],a.text.base.value,P(t))}));A.uitkName="Avatar";export{A as Avatar,M as AvatarLink,A as default};
