import e from'../../external/@babel/runtime/helpers/slicedToArray.js';import n,{useState as t,useRef as o,useEffect as a,useMemo as i}from'react';import r from'react-dom';import c,{css as l}from'styled-components';import{TrackingConstants as s,Z_INDEX as u,Breakpoint as m,Key as d}from'../../constant.js';import{NavType as p}from'../Navigation/types.js';import f from'classnames';import{useVerticalNavDefined as g,useHeaderExpandCallback as v}from'./HeaderContext/HeaderContext.js';import{Navigation as h}from'../Navigation/Navigation.component.js';import{SkipToContent as x}from'./SkipToContent/SkipToContent.component.js';import{MenuButton as N}from'./MenuButton/MenuButton.component.js';import{useBreakpoint as b}from'../../hook/useBreakpoint/index.js';import{useNavigationExpanded as k}from'../Navigation/VerticalNavigationContext/VerticalNavigationContext.js';import{useTracking as y}from'../TrackingProvider/TrackingProvider.component.js';var C=function(){return window.location.pathname},E=function(c){var l=c.className,u=c.globalNavigation,m=c.horizontalNavigation,N=c.logoContent,E=c.productLink,w=c.productName,O=c.skipLink,T=c.removeSkipLink,B=c.useLocation,M=void 0===B?C:B,D=t(!1),z=e(D,2),S=z[0],A=z[1],R=t(null),V=e(R,2),F=V[0],G=V[1],W=o(null),Y="large"===b().breakpoint,Z=g(),q=k(),J=v(),K=y();a((function(){K.mount(s.components.Header.id)}),[K]),a((function(){A(q)}),[q]),a((function(){J(S)}),[S]),a((function(){var e=function(e){!function(e,n,t){e.key===d.ESC&&!n&&t()}(e,Y,(function(){A(!1),W.current.focus()}))};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[Y]);var Q,U=i((function(){return{onActionItemClick:function(e){e||(A(!1),W.current.focus())}}}),[W,A]),X=function(e){var n=e.globalNavigation,t=e.horizontalNavigation;return n||t}(c),$={secondaryNavigationConfig:Q=m,secondaryNavigationEnabled:Boolean(Q),secondaryNavigationType:Q?p.HORIZONTAL:null},ee=$.secondaryNavigationConfig,ne=$.secondaryNavigationEnabled,te=$.secondaryNavigationType,oe=u?n.createElement(P,{isDesktop:Y,open:S},n.createElement(h,{useLocation:M,variant:p.GLOBAL,config:u,isDesktop:Y,internalCallbacks:U})):null,ae=ee?n.createElement(P,{isDesktop:Y,open:S},n.createElement(h,{useLocation:M,variant:te,config:ee,isDesktop:Y,internalCallbacks:U})):null;return n.createElement(n.Fragment,null,n.createElement(L,{ref:function(e){return G(e)},isMenuPanelOpen:S,role:"banner",className:f("uitk-header",l),secondaryNavigationEnabled:ne},!T&&n.createElement(x,{id:null==O?void 0:O.id,text:null==O?void 0:O.text}),n.createElement(H,{productName:w},N,w&&n.createElement(j,{href:E},w)),(X||Z)&&n.createElement(I,{"data-testid":"menu-button-container",isDesktop:Y,isMenuPanelOpen:S,setIsMenuPanelOpen:A,"aria-hidden":Y,menuButtonRef:W})),n.createElement(_,null,Y?F?r.createPortal(oe,F):null:oe,ae))},_=c.div.withConfig({displayName:"Headercomponent__SecondaryNavigationContainer",componentId:"sc-1c4xnss-0"})([""]),w=l(["",""],(function(e){var n=e.theme.elevation;return"\n    box-shadow: ".concat(n.higher.horizontal.bottom.value,"\n  ")})),L=c.div.withConfig({displayName:"Headercomponent__HeaderContent",componentId:"sc-1c4xnss-1"})(["",""],(function(e){var n=e.secondaryNavigationEnabled,t=e.theme,o=t.color,a=t.spacing;return l(["z-index:",";width:100%;box-sizing:border-box;background-color:",";position:relative;display:flex;flex-direction:row;padding:0 ",";",";@media ","{padding:0 ",";}@media ","{padding:0 ",";",";}.uitk-header__product-name{height:20px;margin-top:",";}"],u.TWO,o.background.navigation.global.base.value,a.base.value,w,m.m,a.lg.value,m.l,a.lg.value,!n&&w,a.xs.value)})),H=c.div.withConfig({displayName:"Headercomponent__LogoContainer",componentId:"sc-1c4xnss-2"})(["",""],(function(e){var n=e.productName,t=e.theme.spacing;return l(["display:flex;flex-direction:column;align-items:flex-start;padding:"," 0;"],n?t.base.value:t.m.value)})),j=c.a.withConfig({displayName:"Headercomponent__ProductName",componentId:"sc-1c4xnss-3"})(["",""],(function(e){var n=e.theme,t=n.color,o=n.border,a=n.boxshadow;return l(["color:",";text-decoration:none;font-weight:700;font-size:20px;line-height:30px;margin-right:64px;margin-top:4px;&:hover{text-decoration:underline;}&:focus{outline:none;border-radius:",";box-shadow:",";}"],t.text.primary.value,o.radius.form.element.value,a.navigation.global.button.focus.value)})),I=c((function(e){var t=e.className,o=e.isMenuPanelOpen,a=e.menuButtonRef,i=e.setIsMenuPanelOpen;return n.createElement("div",{className:t,"data-testid":"menu-button-container"},n.createElement(N,{open:o,onPress:function(){return i((function(e){return!e}))},buttonRef:a}))})).withConfig({displayName:"Headercomponent__MenuButtonContainer",componentId:"sc-1c4xnss-4"})(["",""],(function(e){var n=e.isDesktop,t=e.theme.spacing;return l(["display:block;position:absolute;right:",";top:50%;transform:translateY(-50%);",""],t.m.value,n&&"display: none;")})),P=c((function(e){var t=e.children,o=e.className;return n.createElement("div",{"data-testid":"navigation-container",className:o},t)})).withConfig({displayName:"Headercomponent__NavigationContainer",componentId:"sc-1c4xnss-5"})(["",""],(function(e){var n=e.isDesktop,t=e.open;return l(["align-self:flex-end;margin-bottom:12px;margin-left:auto;height:100%;display:",";color:#fff;"],t||n?"flex":"none")}));export{E as Header,E as default};
