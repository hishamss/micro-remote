import e from'../../../external/@babel/runtime/helpers/slicedToArray.js';import o,{useState as t,useRef as n,useEffect as r}from'react';import a,{css as i}from'styled-components';import{Z_INDEX as l}from'../../../constant.js';import{math as d}from'polished';import{remToPx as s}from'../../../lib/remToPx/remToPx.js';import{useSelect as u}from'downshift';import{DropdownButton as c}from'../DropdownButton/DropdownButton.component.js';import m from'../../../external/@uitk/react-icons/esm/CaretDownCentered.js';var p=a(m).withConfig({displayName:"DropdownSinglecomponent__DropdownIcon",componentId:"gx71gd-0"})(["position:absolute;right:",";top:calc(50% - 12px);"],(function(e){return e.theme.spacing.sm.value})),b=i(["",""],(function(e){var o=e.theme,t=o.border,n=o.color,r=o.elevation;return" \n    display: block;\n    box-shadow: ".concat(r.medium.value,";\n    border: ").concat(n.border.base.value," solid ").concat(t.width.base.value,";\n    margin-top: 2px;\n  ")})),g=i(["",""],(function(e){var o=e.theme,t=o.border,n=o.color;return i(["background-color:",";color:",";border-left:"," solid transparent;position:relative;outline:none;","{border-top:"," solid transparent;}&:after{border-radius:",";border:"," solid ",';content:"";position:absolute;top:3px;bottom:3px;left:0;right:3px;}+ li ',"{border-top-color:transparent;}"],n.background.surface.hover.value,n.text.surface.hover.value,t.width.form.element.focus.value,x,t.width.base.value,t.radius.form.element.value,t.width.medium.value,n.border.surface.focus.hover.value,x)})),f=i(["border-top:"," solid transparent;"],(function(e){return e.theme.border.width.base.value})),h=i(["",""],(function(e){var o=e.theme,t=o.border,n=o.color,r=o.font;return i(["border-left:"," solid ",";font-weight:",";"],t.width.form.element.focus.value,n.border.brand.base.value,r.weight.strong.value)})),v=a.ul.withConfig({displayName:"DropdownSinglecomponent__DropdownList",componentId:"gx71gd-1"})(["",""],(function(e){var o=e.isOpen,t=e.theme,n=t.animation,r=t.border,a=t.color;return i(["display:none;width:100%;list-style-type:none;padding:0;margin:0;outline:none;margin:0;overflow-y:auto;overflow-x:hidden;background-color:",";border-radius:",";animation:slide-down "," cubic-bezier(0,0,0.38,0.9);position:absolute;max-height:23.75rem;z-index:",";",";"],a.background.surface.base.value,r.radius.form.element.value,n.duration.animate.fast.value,l.ZERO,o&&b)})),w=a.li.withConfig({displayName:"DropdownSinglecomponent__DropdownListItem",componentId:"gx71gd-2"})(["",""],(function(e){var o=e.active,t=e.selected,n=e.theme,r=n.border,a=n.color;return i(["cursor:pointer;color:",";border-left:"," solid transparent;",";",";"],a.text.base.value,r.width.form.element.focus.value,t&&h,o&&g)})),x=a.span.withConfig({displayName:"DropdownSinglecomponent__DropdownListItemText",componentId:"gx71gd-3"})(["",""],(function(e){var o=e.first,t=e.theme,n=t.border,r=t.color,a=t.spacing;return i(["flex-grow:1;background-color:transparent;padding:"," "," "," ",";border-top:"," solid ",";display:flex;margin-left:",";",";"],a.xs.value,a.sm.value,a.xs.value,a.xxs.value,n.width.base.value,r.border.base.value,d(s(a.xs.value)+" - "+n.width.form.element.focus.value),o&&f)})),y=function(e){return e?e.label:""},I=function(a){var i=a.disabled,l=a.error,d=a.id,s=a.items,m=a.labelledBy,b=a.onBlur,g=a.onChange,f=a.placeholderText,h=a.required,I=a.value,D=t(!1),j=e(D,2),C=j[0],O=j[1],T=n(),_=u({items:s,itemToString:y,selectedItem:I,onSelectedItemChange:function(e){var o=e.selectedItem;return null==g?void 0:g(o)},stateReducer:function(e,o){var t=o.changes,n=o.type,r=e.highlightedIndex;switch(n){case u.stateChangeTypes.MenuKeyDownArrowUp:if(0===r)return Object.assign(Object.assign({},t),{highlightedIndex:s.length-1});break;case u.stateChangeTypes.MenuKeyDownArrowDown:if(r===s.length-1)return Object.assign(Object.assign({},t),{highlightedIndex:0})}return t},onStateChange:function(e){var o,t=e.type,n=null===(o=T.current)||void 0===o?void 0:o.contains(document.activeElement);t===u.stateChangeTypes.MenuBlur&&!n&&(null==b||b())}}),k=_.getItemProps,E=_.getMenuProps,S=_.getToggleButtonProps,B=_.highlightedIndex,P=_.isOpen,M=_.selectedItem;r((function(){P&&!C&&O(!0)}),[P,C]);return o.createElement(o.Fragment,null,o.createElement(c,Object.assign({type:"button",error:l,disabled:i},S({"aria-labelledby":null,ref:T}),{id:d,"aria-expanded":P,"aria-labelledby":m,"aria-required":h,onBlur:function(){!P&&C&&(null==b||b())}}),o.createElement("span",{id:"".concat(d,"-text")},y(M)||f||"Please Select"),o.createElement(p,{size:"m"})),o.createElement(v,Object.assign({},E({onKeyDown:function(e){e.stopPropagation()},"aria-labelledby":"".concat(d,"-lbl")}),{isOpen:P}),P&&s.map((function(e,t){return o.createElement(w,Object.assign({active:t===B,selected:(null==M?void 0:M.id)===e.id,key:e.label},k({item:e,index:t})),o.createElement(x,{first:0===t},e.label))}))))};export{I as DropdownSingle};
