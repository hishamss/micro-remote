"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require('../../../external/@babel/runtime/helpers/slicedToArray.js'),t=require('react'),n=require('styled-components'),o=require('../../../constant.js'),r=require('polished'),a=require('../../../lib/remToPx/remToPx.js'),l=require('downshift'),i=require('../DropdownButton/DropdownButton.component.js'),s=require('../../../external/@uitk/react-icons/esm/CaretDownCentered.js');function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=d(t),c=d(n),p=c.default(s.default).withConfig({displayName:"DropdownSinglecomponent__DropdownIcon",componentId:"gx71gd-0"})(["position:absolute;right:",";top:calc(50% - 12px);"],(function(e){return e.theme.spacing.sm.value})),m=n.css(["",""],(function(e){var t=e.theme,n=t.border,o=t.color,r=t.elevation;return" \n    display: block;\n    box-shadow: ".concat(r.medium.value,";\n    border: ").concat(o.border.base.value," solid ").concat(n.width.base.value,";\n    margin-top: 2px;\n  ")})),f=n.css(["",""],(function(e){var t=e.theme,o=t.border,r=t.color;return n.css(["background-color:",";color:",";border-left:"," solid transparent;position:relative;outline:none;","{border-top:"," solid transparent;}&:after{border-radius:",";border:"," solid ",';content:"";position:absolute;top:3px;bottom:3px;left:0;right:3px;}+ li ',"{border-top-color:transparent;}"],r.background.surface.hover.value,r.text.surface.hover.value,o.width.form.element.focus.value,w,o.width.base.value,o.radius.form.element.value,o.width.medium.value,r.border.surface.focus.hover.value,w)})),b=n.css(["border-top:"," solid transparent;"],(function(e){return e.theme.border.width.base.value})),g=n.css(["",""],(function(e){var t=e.theme,o=t.border,r=t.color,a=t.font;return n.css(["border-left:"," solid ",";font-weight:",";"],o.width.form.element.focus.value,r.border.brand.base.value,a.weight.strong.value)})),h=c.default.ul.withConfig({displayName:"DropdownSinglecomponent__DropdownList",componentId:"gx71gd-1"})(["",""],(function(e){var t=e.isOpen,r=e.theme,a=r.animation,l=r.border,i=r.color;return n.css(["display:none;width:100%;list-style-type:none;padding:0;margin:0;outline:none;margin:0;overflow-y:auto;overflow-x:hidden;background-color:",";border-radius:",";animation:slide-down "," cubic-bezier(0,0,0.38,0.9);position:absolute;max-height:23.75rem;z-index:",";",";"],i.background.surface.base.value,l.radius.form.element.value,a.duration.animate.fast.value,o.Z_INDEX.ZERO,t&&m)})),v=c.default.li.withConfig({displayName:"DropdownSinglecomponent__DropdownListItem",componentId:"gx71gd-2"})(["",""],(function(e){var t=e.active,o=e.selected,r=e.theme,a=r.border,l=r.color;return n.css(["cursor:pointer;color:",";border-left:"," solid transparent;",";",";"],l.text.base.value,a.width.form.element.focus.value,o&&g,t&&f)})),w=c.default.span.withConfig({displayName:"DropdownSinglecomponent__DropdownListItemText",componentId:"gx71gd-3"})(["",""],(function(e){var t=e.first,o=e.theme,l=o.border,i=o.color,s=o.spacing;return n.css(["flex-grow:1;background-color:transparent;padding:"," "," "," ",";border-top:"," solid ",";display:flex;margin-left:",";",";"],s.xs.value,s.sm.value,s.xs.value,s.xxs.value,l.width.base.value,i.border.base.value,r.math(a.remToPx(s.xs.value)+" - "+l.width.form.element.focus.value),t&&b)})),x=function(e){return e?e.label:""};exports.DropdownSingle=function(n){var o=n.disabled,r=n.error,a=n.id,s=n.items,d=n.labelledBy,c=n.onBlur,m=n.onChange,f=n.placeholderText,b=n.required,g=n.value,y=t.useState(!1),D=e.default(y,2),I=D[0],j=D[1],S=t.useRef(),_=l.useSelect({items:s,itemToString:x,selectedItem:g,onSelectedItemChange:function(e){var t=e.selectedItem;return null==m?void 0:m(t)},stateReducer:function(e,t){var n=t.changes,o=t.type,r=e.highlightedIndex;switch(o){case l.useSelect.stateChangeTypes.MenuKeyDownArrowUp:if(0===r)return Object.assign(Object.assign({},n),{highlightedIndex:s.length-1});break;case l.useSelect.stateChangeTypes.MenuKeyDownArrowDown:if(r===s.length-1)return Object.assign(Object.assign({},n),{highlightedIndex:0})}return n},onStateChange:function(e){var t,n=e.type,o=null===(t=S.current)||void 0===t?void 0:t.contains(document.activeElement);n===l.useSelect.stateChangeTypes.MenuBlur&&!o&&(null==c||c())}}),C=_.getItemProps,O=_.getMenuProps,q=_.getToggleButtonProps,E=_.highlightedIndex,T=_.isOpen,k=_.selectedItem;t.useEffect((function(){T&&!I&&j(!0)}),[T,I]);return u.default.createElement(u.default.Fragment,null,u.default.createElement(i.DropdownButton,Object.assign({type:"button",error:r,disabled:o},q({"aria-labelledby":null,ref:S}),{id:a,"aria-expanded":T,"aria-labelledby":d,"aria-required":b,onBlur:function(){!T&&I&&(null==c||c())}}),u.default.createElement("span",{id:"".concat(a,"-text")},x(k)||f||"Please Select"),u.default.createElement(p,{size:"m"})),u.default.createElement(h,Object.assign({},O({onKeyDown:function(e){e.stopPropagation()},"aria-labelledby":"".concat(a,"-lbl")}),{isOpen:T}),T&&s.map((function(e,t){return u.default.createElement(v,Object.assign({active:t===E,selected:(null==k?void 0:k.id)===e.id,key:e.label},C({item:e,index:t})),u.default.createElement(w,{first:0===t},e.label))}))))};
