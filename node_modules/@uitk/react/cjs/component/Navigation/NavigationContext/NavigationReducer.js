"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require('../../../external/lodash-es/cloneDeep.js'),n=require('../types.js'),r=function(e){return void 0!==e.links},a=function(e,t,n){return t.isActive?t.isActive(e.url,n):e.isActive?e.isActive(e.url,n):n===e.url},o=function(e,t){return!e&&!t},i=function(e,t){return e?Boolean(t.expanded):t.active},u=function(e,n){var u=n.isDesktop,l=n.route,s=t.default(e);return function t(n){for(var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=!1,d=0;d<n.length;d++){var c=n[d];if(o(s,p)){if(r(c)){var v=t(c.links);c.active=v,c.expanded=i(u,c)}else c.active=a(c,e,l);c.active&&(p=!0)}else c.active=!1,r(c)&&(c.expanded=i(u,c),t(c.links,!0))}return p}(s.links),s},l=function(e,t){return(e===n.NavType.GLOBAL||e===n.NavType.HORIZONTAL)&&t},s=function(e,n){var a=t.default(e),o=n.isDesktop,i=n.label,u=n.variant;return function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!1,s=!1,p=0;p<t.length;p++){var d=t[p];r(d)?s&&l(u,o)?d.expanded=!1:n||d.label!==i?e(d.links,n)?(a=!0,d.expanded=!0):l(u,o)&&(d.expanded=!1):(d.expanded=!0,s=!0,e(d.links,!0),a=!0):d.active&&n&&(a=!0)}return a}(a.links),a},p=function(e,n){var a=t.default(e);return function e(t){for(var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!1,i=0;i<t.length;i++){var u=t[i];if(r(u)&&(a||u.label!==n?(a&&(u.expanded=!1),e(u.links,a)):(u.expanded=!1,o=!0,e(u.links,!0)),o))return}}(a.links),a},d=function(e){var n=t.default(e);return function e(t){for(var n=0;n<t.length;n++){var a=t[n];r(a)&&(a.expanded=!1,e(a.links))}}(n.links),n},c=function(e){var n=t.default(e);return function e(t){for(var n=0;n<t.length;n++){var a=t[n];r(a)&&(a.expanded=a.active,e(a.links))}}(n.links),n};!function(e){e.ROUTE_UPDATE="ROUTE_UPDATE",e.OPEN_PANEL="OPEN_PANEL",e.CLOSE_PANEL="CLOSE_PANEL",e.CLOSE_NAV="CLOSE_NAV",e.OPEN_NAV_ACTIVE_PATH="OPEN_NAV",e.RESET_NAVIGATION_STATE="RESET_NAVIGATION_STATE"}(e||(e={}));exports.closeNav=function(){return{type:e.CLOSE_NAV}},exports.closePanel=function(t){return{type:e.CLOSE_PANEL,payload:t}},exports.getActiveStateForRoute=u,exports.getStateForCloseNavUpdate=d,exports.getStateForClosePanelUpdate=p,exports.getStateForOpenNavAtActivePanelUpdate=c,exports.getStateForOpenPanelUpdate=s,exports.isPanel=r,exports.openNavAtActivePath=function(){return{type:e.OPEN_NAV_ACTIVE_PATH}},exports.openPanel=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:e.OPEN_PANEL,payload:{label:t,variant:n,isDesktop:r}}},exports.reducer=function(t,n){switch(n.type){case e.RESET_NAVIGATION_STATE:return n.payload;case e.ROUTE_UPDATE:return u(t,n.payload);case e.OPEN_PANEL:return s(t,n.payload);case e.CLOSE_PANEL:return p(t,n.payload);case e.CLOSE_NAV:return d(t);case e.OPEN_NAV_ACTIVE_PATH:return c(t);default:return t}},exports.resetNavigationState=function(t){return{type:e.RESET_NAVIGATION_STATE,payload:t}},exports.routeUpdate=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:e.ROUTE_UPDATE,payload:{route:t,isDesktop:n}}};
