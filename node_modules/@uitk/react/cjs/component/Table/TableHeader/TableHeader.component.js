"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require('tslib'),t=require('react'),o=require('styled-components'),n=require('@react-aria/button'),r=require('classnames'),a=require('../../../constant.js'),l=require('../styles.js'),s=require('../TableContext/TableContext.component.js'),d=require('../../../external/@uitk/react-icons/esm/SortAscending.js'),i=require('../../../external/@uitk/react-icons/esm/SortDescending.js'),c=require('../../../external/@uitk/react-icons/esm/SortUnsorted.js');function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=u(t),m=u(o),b=u(r),p=o.css(["",""],(function(e){var t=e.theme,n=t.border,r=t.color;return o.css(["background:",";border-right:"," solid ",";width:1px;"],r.background.table.row.accent.subtle.value,n.width.base.value,r.border.base.value)})),v=o.css(["",""],(function(e){var t=e.theme.color;return o.css(["background:",";border-bottom:2px solid black;border-top:none;font-size:0.875rem;color:",";"],t.background.table.row.accent.slight.value,t.text.table.row.value)})),h=o.css(["",""],(function(e){var t=e.theme,n=t.border,r=t.color,l=e.topOffset,s=e.isSticky,d=e.zIndex;return o.css(["border-top:"," solid ",";border-bottom:2px solid ",";background:",";top:",";z-index:",";",""],n.width.base.value,r.border.base.value,r.border.brand.base.value,r.background.base.value,l||"0px",d||"".concat(a.Z_INDEX.EIGHT),s&&"position: sticky;")})),k=m.default.th.withConfig({displayName:"TableHeadercomponent__TableHeaderCell",componentId:"sc-1smpg2l-0"})(["",""],(function(e){var t=e.isExpandHeaderCell,n=e.nested;return o.css(["",";"," ",";",""],l.headerAndCellStyles,h,t&&p,n&&v)})),g=m.default.th.withConfig({displayName:"TableHeadercomponent__TableHeaderSortCell",componentId:"sc-1smpg2l-1"})(["",""],(function(e){var t=e.theme.color,n=e.nested,r=e.sortSelected;return o.css(["&.focused{","{outline:3px solid ",";outline-offset:-3px;background-color:transparent;}}"," "," "," ",";"],C,t.border.primary.base.value,h,n&&v,r&&!n&&"background-color: ".concat(t.background.table.header.accent.value,";"),r&&n&&"background-color: ".concat(t.background.table.nested.header.accent.value,";"))})),y=function(e){var n=e.ascending,r=e.columnKey;e.nested;var a=e.sortColumn,l=t.useContext(o.ThemeContext);return a===r?n?f.default.createElement(d.default,{fill:l.color.text.table.header.value}):f.default.createElement(i.default,{fill:l.color.text.table.header.value}):f.default.createElement(c.default,{fill:l.color.text.table.header.value})},x=function(o){var r=o.children,a=o.className,l=e.__rest(o,["children","className"]),s=t.useRef(),d=n.useButton(l,s).buttonProps;return f.default.createElement("button",Object.assign({},d,{ref:s,className:a}),r)},C=m.default(x).withConfig({displayName:"TableHeadercomponent__TableHeaderSortButton",componentId:"sc-1smpg2l-2"})(["",";width:100%;background:none;color:inherit;border:none;cursor:pointer;outline:none;font:inherit;display:flex;flex-direction:row;align-items:center;"],l.headerAndCellStyles),S=m.default.span.withConfig({displayName:"TableHeadercomponent__SortHeaderText",componentId:"sc-1smpg2l-3"})(["",""],(function(e){var t=e.theme.spacing;return o.css(["padding-right:",";"],t.xxs.value)})),T=function(e){var o,n,r,a=e.captionId,l=e.className,d=e.onSort,i=s.useTableActions(),c=s.useTableState(),u=s.useTableConfig(),m=s.useTableExpandableContent(),p=t.useRef(),v=u.columns.map((function(e){var t,o,n,r,l,s,m,p,v,h,x,T=null!==(t=e.key)&&void 0!==t?t:e.label;return p=e,v=u.sort,h=p.key,(x=p.sortColumn)||v&&!1!==x&&h?f.default.createElement(g,{sortSelected:c.sortColumn===e.key,scope:"col",key:T,className:b.default({focused:e.key===c.focusedColumn}),isSticky:null===(o=u.sticky)||void 0===o?void 0:o.headerSticky,topOffset:null===(n=u.sticky)||void 0===n?void 0:n.headerOffset,zIndex:null===(r=u.sticky)||void 0===r?void 0:r.headerIndex,nested:u.nested},f.default.createElement(C,{nested:u.nested,onPress:function(){return function(e,t,o,n,r,a,l){var s,d,i=window.scrollY,c=e!==r.sortColumn||!r.isSortAscending;null==l||l(c,t,e),o.sort({columnId:e,sortFn:a||n.sortFn}),o.setCaptionDescription((null===(s=n.caption)||void 0===s?void 0:s.getSortCaptionDescription)?f.default.createElement("span",{"aria-live":"polite","aria-atomic":"true"},null===(d=n.caption)||void 0===d?void 0:d.getSortCaptionDescription(t,c)):f.default.createElement("span",{"aria-live":"polite","aria-atomic":"true"},function(e,t){return t?"Column "+e+" is sorted in ascending order":"Column "+e+" is sorted in descending order"}(t,c))),window.scrollTo(0,i)}(e.key,e.label,i,u,c,e.sortFn,d)},onFocusChange:function(t){return function(e,t){return i.setFocusedColumn(e?t:null)}(t,e.key)},"aria-describedby":c.sortColumn===e.key?a:null},f.default.createElement(S,null,e.label),f.default.createElement(y,{sortColumn:c.sortColumn,columnKey:e.key,ascending:c.isSortAscending,nested:u.nested}))):f.default.createElement(k,{scope:"col",key:T,isSticky:null===(l=u.sticky)||void 0===l?void 0:l.headerSticky,topOffset:null===(s=u.sticky)||void 0===s?void 0:s.headerOffset,zIndex:null===(m=u.sticky)||void 0===m?void 0:m.headerIndex,nested:u.nested},e.label)}));return m&&v.unshift(f.default.createElement(k,{ref:p,scope:"col",key:"expand-row-header",isExpandHeaderCell:!0,isSticky:null===(o=u.sticky)||void 0===o?void 0:o.headerSticky,topOffset:null===(n=u.sticky)||void 0===n?void 0:n.headerOffset,zIndex:null===(r=u.sticky)||void 0===r?void 0:r.headerIndex,nested:u.nested},m.columnHeaderText||"More")),f.default.createElement("thead",{className:l},f.default.createElement("tr",null,v))},w=m.default(T).withConfig({displayName:"TableHeadercomponent__TableHeader",componentId:"sc-1smpg2l-4"})(["",""],(function(e){var t=e.theme,n=t.color,r=t.font;return o.css(["background:",";color:",";font-weight:",";",";"],n.background.table.header.value,n.text.table.header.value,r.weight.medium.value,l.headerAndCellStyles)}));exports.TableHeader=w;
