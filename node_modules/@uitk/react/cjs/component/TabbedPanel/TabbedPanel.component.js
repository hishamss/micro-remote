"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require('../../external/@babel/runtime/helpers/slicedToArray.js'),a=require('react'),t=require('../../constant.js'),n=require('styled-components'),r=require('classnames'),o=require('@react-aria/button'),l=require('react-transition-group'),i=require('polished'),u=require('../Panel/Panel.component.js'),d=require('../TrackingProvider/TrackingProvider.component.js'),s=require('../../hook/useControllableState/useControllableState.js'),c=require('../../utility/getUuid/getUuid.js');function b(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=b(a),p=b(n),m=b(r),v={enter:"0",entering:"0",entered:"1",exiting:"0",exited:"0"},g=p.default.div.withConfig({displayName:"TabbedPanelcomponent__Container",componentId:"sc-1gf0ofu-0"})(["width:100%;.uitk-accordion{display:block;}@media ","{.uitk-accordion{display:none;}}"],t.Breakpoint.s),y=p.default.div.withConfig({displayName:"TabbedPanelcomponent__StyledTabbedPanel",componentId:"sc-1gf0ofu-1"})(["",""],(function(e){var a=e.theme,r=a.border,o=a.color;return n.css(["display:none;background-color:",";border:"," solid ",";border-radius:",";flex-direction:column;width:100%;@media ","{display:flex;}"],o.background.surface.base.value,r.width.panels.value,o.border.base.value,r.radius.base.value,t.Breakpoint.s)})),h=n.keyframes(["from{opacity:0;width:0;}to{opacity:1;width:100%;}"]),x=n.css(["",""],(function(e){var a=e.theme,t=a.font,r=a.color,o=a.animation,l=a.spacing;return n.css(["font-weight:",";color:",';:after{content:" ";position:absolute;top:0;right:0;bottom:0;left:0;box-shadow:0 4px 0 0 ',";animation:"," "," linear;margin-right:",";}"],t.weight.medium.value,r.text.base.value,r.border.brand.base.value,h,o.duration.animate.medium.value,l.xs.value)})),k=f.default.forwardRef((function(e,a){var t=e.ariaControls,n=e.ariaLabelledBy,r=e.ariaSelected,l=e.buttonTabIndex,i=e.children,u=e.className,d=e.id,s=e.onPress,c=o.useButton({onPress:s},a).buttonProps;return f.default.createElement("button",Object.assign({className:m.default("uitk-tabbed-panel-button",u),id:d,"aria-selected":r,role:"tab","aria-labelledby":n,ref:a},c,{"aria-controls":t,tabIndex:l}),i)}));k.displayName="_TabbedPanelHeaderButton";var P=n.css(["",""],(function(e){var a=e.theme,t=a.border,n=a.color;return"\n    border-radius: ".concat(t.radius.base.value,";\n    box-shadow: 0 0 0 3px ").concat(n.border.brand.base.value,";\n    color: ").concat(n.text.base.value,";\n    outline: none;\n  ")})),E=p.default(k).withConfig({displayName:"TabbedPanelcomponent__TabbedPanelHeaderButton",componentId:"sc-1gf0ofu-2"})(["",""],(function(e){var a=e.active,t=e.theme,r=t.border,o=t.color,l=t.spacing;return n.css(["background:none;border:none;font:inherit;cursor:pointer;outline:inherit;display:flex;color:",";margin:0 "," "," 0;padding:"," ",";text-decoration:none;&:active{color:",";}&:hover,&:focus{border-radius:",";color:",";box-shadow:0 0 0 3px ",";outline:none;}&:focus{",";}",""],i.lighten(.095,o.text.base.value),l.xs.value,l.xs.value,l.sm.value,l.xs.value,o.text.base.value,r.radius.base.value,o.text.base.value,o.border.brand.base.value,P,a&&x)})),T=p.default.span.withConfig({displayName:"TabbedPanelcomponent__TabbedPanelList",componentId:"sc-1gf0ofu-3"})(["",""],(function(e){var a=e.theme,t=a.color,r=a.spacing;return n.css(["border-bottom:4px solid ",";display:flex;flex-wrap:wrap;list-style:none;margin:"," "," 0 ",";padding:0;position:relative;"],t.background.accent.subtle.value,r.sm.value,r.m.value,r.base.value)})),w=p.default.span.withConfig({displayName:"TabbedPanelcomponent__TabbedPanelListItem",componentId:"sc-1gf0ofu-4"})(["",""],(function(e){var a=e.theme,t=a.color,r=a.spacing;return n.css(["box-shadow:0 4px 0 0 ",";outline:none;position:relative;white-space:nowrap;margin-top:",";"],t.background.accent.subtle.value,r.sm.value)})),I=function(n){var r=n.className,o=n.getPanelIdForIndex,l=n.getTabIdForIndex,i=n.onHeaderPress,u=n.panels,d=n.selectedPanel,s=a.useRef(),c=a.useState([]),b=e.default(c,2),p=b[0],v=b[1],g=function(n,r){var o=a.useState(null),l=e.default(o,2),i=l[0],u=l[1],d=f.default.useCallback((function(e){var a=r.length,n=null!==i?i:0;switch(e.key){case t.Key.RIGHT_ARROW:case t.Key.RIGHT:e.preventDefault(),u(n===a-1?0:n+1);break;case t.Key.LEFT_ARROW:case t.Key.LEFT:e.preventDefault(),u(0===n?a-1:n-1);break;case t.Key.HOME:e.preventDefault(),u(0);break;case t.Key.END:e.preventDefault(),u(a-1)}}),[i,r]);return a.useEffect((function(){if(n.current){var e=function(e){n.current.contains(e.target)&&(e.key!==t.Key.HOME&&e.key!==t.Key.END||e.preventDefault())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[n]),a.useEffect((function(){if(null!==i){var e=r[i].current;document.activeElement!==e&&(null==e||e.focus())}}),[r,i]),a.useEffect((function(){var e=n.current;if(e)return n.current.addEventListener("keyup",d,!1),function(){e.removeEventListener("keyup",d,!1)}}),[n,d]),[i,u]}(s,p),y=e.default(g,2)[1];return a.useEffect((function(){for(var e=new Array(u.length),t=0;t<e.length;t++)e[t]=a.createRef();v(e)}),[u]),f.default.createElement("div",{className:m.default("uitk-tabbed-panel-header",r)},f.default.createElement(T,{role:"tablist","aria-label":"tabs",ref:s},u.map((function(e,a){return f.default.createElement(w,{key:"tabbed-panel-btn-".concat(e.header)},f.default.createElement(E,{ref:p[a],id:l(a),"data-testid":"tabbed-panel-header-btn",onPress:function(){i(a),y(a)},active:d===a,buttonTabIndex:0===a?0:-1,ariaSelected:d===a,ariaControls:d===a?o(a):null},e.header))}))))},_=p.default.div.withConfig({displayName:"TabbedPanelcomponent__TabbedContent",componentId:"sc-1gf0ofu-5"})(["",""],(function(e){var a=e.transition,t=e.theme,r=t.spacing,o=t.animation,l=t.border,i=t.color;return n.css(["margin-top:",";padding:"," "," "," ",";transition:opacity "," linear;opacity:",";&:focus{border-radius:",";box-shadow:0 0 0 3px ",";border-color:",";outline:none;}"],r.sm.value,r.m.value,r.base.value,r.xxl.value,r.base.value,o.duration.animate.slow.value,v[a],l.radius.base.value,i.border.brand.base.value,i.text.brand.value)}));exports.TabbedPanel=function(n){var r=n.className,o=n.id,i=n.onHeaderPress,b=n.panels,p=n.selectedPanel,v=n.titlesAs,h=d.useTracking();a.useEffect((function(){h.mount(t.TrackingConstants.components.TabbedPanel.id)}),[h]);var x=s.useControllableState(p,i,0),k=e.default(x,2),P=k[0],E=k[1],T=a.useState((function(){return o||c.getUuid("tabbed-panel-container")})),w=e.default(T,1)[0],C=a.useState((function(){return c.getUuid("tabbed-panel")})),N=e.default(C,1)[0],q=function(e){return"".concat(N,"-").concat(e)},H=function(e){return"".concat(N,"-tab").concat(e)},S=function(e){null!==e&&E(e)};return f.default.createElement(g,{className:m.default("uitk-tabbed-panel",r)},f.default.createElement(y,{id:w},f.default.createElement(I,{panels:b,onHeaderPress:S,selectedPanel:P,id:N,getPanelIdForIndex:q,getTabIdForIndex:H}),f.default.createElement(l.TransitionGroup,null,f.default.createElement(l.Transition,{timeout:0,key:P,exit:!1},(function(e){return f.default.createElement(_,{role:"tabpanel","aria-labelledby":H(P),tabIndex:0,"data-testid":"tabbed-content",transition:e,id:q(P)},b[P].content)})))),f.default.createElement(u.Panel.AccordionGroup,{onHeaderPress:S,open:P},b.map((function(e){return f.default.createElement(u.Panel,{titleAs:v,title:e.header,key:"accordion-panel-".concat(e.header)},e.content)}))))};
