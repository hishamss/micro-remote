"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require('../../external/@babel/runtime/helpers/slicedToArray.js'),t=require('tslib'),n=require('react'),r=require('styled-components'),o=require('react-popper'),u=require('@react-aria/button'),a=require('../../constant.js'),i=require('@react-aria/visually-hidden'),l=require('react-dom'),s=require('classnames');function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=c(n),d=c(r),f=c(l),m=c(s),v=d.default.button.withConfig({displayName:"Tooltipcomponent__TooltipTrigger",componentId:"exjipk-0"})(["",""],(function(e){var t=e.theme,n=t.border,o=t.boxshadow;return r.css(["cursor:pointer;background:none;outline:none;border-radius:",";border:"," solid transparent;padding:0;line-height:0px;vertical-align:text-bottom;&:active,&:focus{box-shadow:",";}"],n.radius.form.element.value,n.width.base.value,o.form.focus.value)})),b=["mouseenter"],h=["mouseleave","blur","keyup"],x=d.default.div.withConfig({displayName:"Tooltipcomponent__Arrow",componentId:"exjipk-1"})(["",""],(function(e){var t=e.theme.color;return r.css(['cursor:pointer;&,&::before{position:absolute;width:12px;height:12px;z-index:-1;}&::before{content:"";transform:rotate(45deg);background:',";}"],t.text.base.value)})),y=function(e){return e.key},g=function(e){return"keyup"===e.type&&e.key===a.Key.ESC},w=function(e,t){return e&&t()},E=function(r){var a=r.children,l=r.className,s=r.content,c=r.maxWidth,d=void 0===c?"260px":c,E=r.placement,T=void 0===E?"top":E,_=r.tooltipParentSelector,j=r.visible,q=t.__rest(r,["children","className","content","maxWidth","placement","tooltipParentSelector","visible"]),L=n.useState(null),N=e.default(L,2),P=N[0],S=N[1],C=n.useState(!1),M=e.default(C,2),O=M[0],z=M[1],I=n.useState(!1),W=e.default(I,2),R=W[0],A=W[1],H=n.useState(!1),B=e.default(H,2),D=B[0],F=B[1],K=function(){return z(!0)},V=n.useMemo((function(){return e=z,function(t){y(t)?g(t)&&e(!1):e(!1)};var e}),[z]),X=n.useMemo((function(){return function(){var e,t;e=function(){return z((function(e){return!e}))},t=function(){return F((function(e){return!e}))},R?t():e()}}),[R]),Z=n.useMemo((function(){return function(e){A(!1),w(!D,(function(){return Y.current=window.setTimeout((function(){return V(e)}),500)}))}}),[D,V]),G=n.useMemo((function(){return function(){A(!0),w(O,(function(){return clearTimeout(Y.current)})),w(!O,(function(){return K()}))}}),[O]),J=n.useMemo((function(){return function(e){w(function(e){return function(e){return"blur"===e.type}(e)||y(e)&&g(e)}(e),(function(){return F(!1)})),w(!R,(function(){return V(e)}))}}),[R,V]),Q=n.useRef(null),U=n.useRef(null),Y=n.useRef(),$=o.usePopper(Q.current,U.current,{placement:T,modifiers:[{name:"arrow",options:{element:P,padding:10}},{name:"offset",options:{offset:[0,8]}}]}),ee=$.attributes,te=$.styles,ne={onPress:X},re=u.useButton(ne,Q).buttonProps,oe=Q&&U&&void 0===j;n.useEffect((function(){if(oe){var e=[];if(O){var t=U.current;U.current.addEventListener("mouseenter",G),U.current.addEventListener("mouseleave",Z),e.push((function(){return null==t?void 0:t.removeEventListener("mouseenter",G)}),(function(){return null==t?void 0:t.removeEventListener("mouseleave",Z)}))}var n=b.map((function(e){var t,n,r=Q.current,o=(t=G,n=K,"mouseenter"===e?t:n);return r.addEventListener(e,o),function(){return null==r?void 0:r.removeEventListener(e,o)}})),r=h.map((function(e){var t,n,r,o=Q.current,u=(n=J,r=Z,"keyup"===(t=e)||"blur"===t?n:r);return o.addEventListener(e,u),function(){return null==o?void 0:o.removeEventListener(e,u)}}));return function(){[e,n,r].forEach((function(e){return e.forEach((function(e){return e()}))}))}}}),[j,Q,U,O,V,oe,G,Z,J]);var ue=i.useVisuallyHidden().visuallyHiddenProps;return p.default.createElement(p.default.Fragment,null,p.default.createElement(v,Object.assign({className:m.default("uitk-tooltip-trigger",l),ref:Q},re),a,p.default.createElement("span",Object.assign({},ue),"Tooltip"),p.default.createElement("span",Object.assign({},ue),s)),p.default.createElement("span",{"aria-live":"polite"},(null!=j?j:O)?function(e,t){return t?f.default.createPortal(e,t()):e}(p.default.createElement(k,Object.assign({role:"tooltip",ref:U,style:te.popper},ee.popper,q,{maxWidth:d}),s,p.default.createElement(x,{ref:S,style:te.arrow})),_):null))},k=d.default.div.withConfig({displayName:"Tooltipcomponent__TooltipContent",componentId:"exjipk-2"})(["",""],(function(e){var t=e.maxWidth,n=e.theme,o=n.animation,u=n.border,i=n.color,l=n.elevation,s=n.font,c=n.spacing;return r.css(["cursor:pointer;background:",";color:",";font-weight:",";font-family:",";padding:",";font-size:",";border-radius:",";box-shadow:",";animation:"," ",";transition:opacity 0.25s linear;z-index:",";max-width:",';white-space:pre-wrap;word-wrap:break-word;&[data-popper-reference-hidden="true"]{opacity:0;}&[data-popper-placement^="top"] > ','{bottom:-4px;}&[data-popper-placement^="bottom"] > ','{top:-4px;}&[data-popper-placement^="left"] > ','{right:-4px;}&[data-popper-placement^="right"] > ',"{left:-4px;}"],i.text.base.value,i.text.inverse.value,s.weight.base.value,s.family.base.value,c.sm.value,s.size.body.base.value,u.radius.base.value,l.medium.value,T,o.duration.animate.medium.value,a.Z_INDEX.ONE,t,x,x,x,x)})),T=r.keyframes(["from{opacity:0;}to{opacity:1;}"]);exports.Tooltip=E,exports.TooltipContent=k,exports.default=E;
