"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require('../../external/@babel/runtime/helpers/slicedToArray.js'),n=require('react'),t=require('react-dom'),a=require('styled-components'),o=require('../../constant.js'),i=require('../Navigation/types.js'),r=require('classnames'),u=require('./HeaderContext/HeaderContext.js'),l=require('../Navigation/Navigation.component.js'),s=require('./SkipToContent/SkipToContent.component.js'),c=require('./MenuButton/MenuButton.component.js'),d=require('../../hook/useBreakpoint/index.js'),f=require('../Navigation/VerticalNavigationContext/VerticalNavigationContext.js'),p=require('../TrackingProvider/TrackingProvider.component.js');function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var v=m(n),g=m(t),N=m(a),x=m(r),b=function(){return window.location.pathname},h=function(t){var a=t.className,r=t.globalNavigation,c=t.horizontalNavigation,m=t.logoContent,N=t.productLink,h=t.productName,y=t.skipLink,q=t.removeSkipLink,T=t.useLocation,j=void 0===T?b:T,B=n.useState(!1),L=e.default(B,2),I=L[0],M=L[1],P=n.useState(null),O=e.default(P,2),D=O[0],S=O[1],z=n.useRef(null),R="large"===d.useBreakpoint().breakpoint,A=u.useVerticalNavDefined(),V=f.useNavigationExpanded(),Z=u.useHeaderExpandCallback(),F=p.useTracking();n.useEffect((function(){F.mount(o.TrackingConstants.components.Header.id)}),[F]),n.useEffect((function(){M(V)}),[V]),n.useEffect((function(){Z(I)}),[I]),n.useEffect((function(){var e=function(e){!function(e,n,t){e.key===o.Key.ESC&&!n&&t()}(e,R,(function(){M(!1),z.current.focus()}))};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[R]);var G,K=n.useMemo((function(){return{onActionItemClick:function(e){e||(M(!1),z.current.focus())}}}),[z,M]),W=function(e){var n=e.globalNavigation,t=e.horizontalNavigation;return n||t}(t),X={secondaryNavigationConfig:G=c,secondaryNavigationEnabled:Boolean(G),secondaryNavigationType:G?i.NavType.HORIZONTAL:null},Y=X.secondaryNavigationConfig,J=X.secondaryNavigationEnabled,Q=X.secondaryNavigationType,U=r?v.default.createElement(H,{isDesktop:R,open:I},v.default.createElement(l.Navigation,{useLocation:j,variant:i.NavType.GLOBAL,config:r,isDesktop:R,internalCallbacks:K})):null,$=Y?v.default.createElement(H,{isDesktop:R,open:I},v.default.createElement(l.Navigation,{useLocation:j,variant:Q,config:Y,isDesktop:R,internalCallbacks:K})):null;return v.default.createElement(v.default.Fragment,null,v.default.createElement(E,{ref:function(e){return S(e)},isMenuPanelOpen:I,role:"banner",className:x.default("uitk-header",a),secondaryNavigationEnabled:J},!q&&v.default.createElement(s.SkipToContent,{id:null==y?void 0:y.id,text:null==y?void 0:y.text}),v.default.createElement(C,{productName:h},m,h&&v.default.createElement(_,{href:N},h)),(W||A)&&v.default.createElement(w,{"data-testid":"menu-button-container",isDesktop:R,isMenuPanelOpen:I,setIsMenuPanelOpen:M,"aria-hidden":R,menuButtonRef:z})),v.default.createElement(k,null,R?D?g.default.createPortal(U,D):null:U,$))},k=N.default.div.withConfig({displayName:"Headercomponent__SecondaryNavigationContainer",componentId:"sc-1c4xnss-0"})([""]),y=a.css(["",""],(function(e){var n=e.theme.elevation;return"\n    box-shadow: ".concat(n.higher.horizontal.bottom.value,"\n  ")})),E=N.default.div.withConfig({displayName:"Headercomponent__HeaderContent",componentId:"sc-1c4xnss-1"})(["",""],(function(e){var n=e.secondaryNavigationEnabled,t=e.theme,i=t.color,r=t.spacing;return a.css(["z-index:",";width:100%;box-sizing:border-box;background-color:",";position:relative;display:flex;flex-direction:row;padding:0 ",";",";@media ","{padding:0 ",";}@media ","{padding:0 ",";",";}.uitk-header__product-name{height:20px;margin-top:",";}"],o.Z_INDEX.TWO,i.background.navigation.global.base.value,r.base.value,y,o.Breakpoint.m,r.lg.value,o.Breakpoint.l,r.lg.value,!n&&y,r.xs.value)})),C=N.default.div.withConfig({displayName:"Headercomponent__LogoContainer",componentId:"sc-1c4xnss-2"})(["",""],(function(e){var n=e.productName,t=e.theme.spacing;return a.css(["display:flex;flex-direction:column;align-items:flex-start;padding:"," 0;"],n?t.base.value:t.m.value)})),_=N.default.a.withConfig({displayName:"Headercomponent__ProductName",componentId:"sc-1c4xnss-3"})(["",""],(function(e){var n=e.theme,t=n.color,o=n.border,i=n.boxshadow;return a.css(["color:",";text-decoration:none;font-weight:700;font-size:20px;line-height:30px;margin-right:64px;margin-top:4px;&:hover{text-decoration:underline;}&:focus{outline:none;border-radius:",";box-shadow:",";}"],t.text.primary.value,o.radius.form.element.value,i.navigation.global.button.focus.value)})),q=function(e){var n=e.className,t=e.isMenuPanelOpen,a=e.menuButtonRef,o=e.setIsMenuPanelOpen;return v.default.createElement("div",{className:n,"data-testid":"menu-button-container"},v.default.createElement(c.MenuButton,{open:t,onPress:function(){return o((function(e){return!e}))},buttonRef:a}))},w=N.default(q).withConfig({displayName:"Headercomponent__MenuButtonContainer",componentId:"sc-1c4xnss-4"})(["",""],(function(e){var n=e.isDesktop,t=e.theme.spacing;return a.css(["display:block;position:absolute;right:",";top:50%;transform:translateY(-50%);",""],t.m.value,n&&"display: none;")})),T=function(e){var n=e.children,t=e.className;return v.default.createElement("div",{"data-testid":"navigation-container",className:t},n)},H=N.default(T).withConfig({displayName:"Headercomponent__NavigationContainer",componentId:"sc-1c4xnss-5"})(["",""],(function(e){var n=e.isDesktop,t=e.open;return a.css(["align-self:flex-end;margin-bottom:12px;margin-left:auto;height:100%;display:",";color:#fff;"],t||n?"flex":"none")}));exports.Header=h,exports.default=h;
