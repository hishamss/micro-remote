"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require('../../external/@babel/runtime/helpers/slicedToArray.js'),n=require('tslib'),t=require('react'),o=require('styled-components'),i=require('./types.js'),a=require('../../constant.js'),r=require('classnames'),l=require('./PaginationEntries/PaginationEntries.component.js'),s=require('./PaginationNav/PaginationNav.component.js'),u=require('../TrackingProvider/TrackingProvider.component.js'),g=require('../../hook/useControllableState/useControllableState.js');function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var P=c(t),d=c(o),f=c(r),p=o.css(["justify-content:space-between;"]),v=o.css(["justify-content:flex-end;"]),T=d.default.div.withConfig({displayName:"Paginationcomponent__PaginationContent",componentId:"eld2ko-0"})(["position:relative;"]),m=d.default.nav.withConfig({displayName:"Paginationcomponent__PaginationContainer",componentId:"eld2ko-1"})(["",""],(function(e){var n=e.isEntriesSpecified;return o.css(["display:flex;flex-direction:column;@media ","{flex-direction:row;"," "," align-items:center;}"],a.Breakpoint.m,n&&p,!n&&v)})),E=function(o){var r=o.children,c=o.className,d=o.config,p=o.entriesPerPageConfig,v=o.id,E=o.onPageChange,x=o.page,O=n.__rest(o,["children","className","config","entriesPerPageConfig","id","onPageChange","page"]),b=u.useTracking();t.useEffect((function(){b.mount(a.TrackingConstants.components.Pagination.id)}),[b]);var B=d.displayTextAs,C=d.enableGotoPage,_=void 0!==C&&C,y=d.getPaginationText,N=d.gotoPageButtonText,h=void 0===N?"Go":N,j=d.gotoPageLabel,S=void 0===j?"Go To Page":j,q=d.nextButtonText,k=void 0===q?"Next":q,M=d.onGotoPageError,G=d.onNextError,w=void 0===G?"There are no more pages":G,I=d.onPrevError,R=void 0===I?"There are no previous pages":I,A=d.pageSize,z=void 0===A?25:A,L=d.prevButtonText,D=void 0===L?"Previous":L,V=d.totalItemsCount,F=g.useControllableState(x,E,1),H=e.default(F,2),J=H[0],K=H[1],Q=new Map([[i.PaginationPosition.TOP,t.useRef()],[i.PaginationPosition.BOTTOM,t.useRef()]]),U=t.useState(p&&function(e,n){var t;return null!==(t=e.filter((function(e){return e.value===n}))[0])&&void 0!==t?t:e[0]}(p.pageSizeOptions,p.initialValue)),W=e.default(U,2),X=W[0],Y=W[1],Z=function(e){Y(e),K(1),te(null)},$=t.useState(null),ee=e.default($,2),ne=ee[0],te=ee[1],oe=function(e,n,t,o){!function(e,n,t,o){return e<=Math.ceil(n/((null==t?void 0:t.value)||o))&&e>0}(e,V,X,z)?te({position:n,boundary:t}):(K(e),te(null),o&&(Q.get(n).current.value="")),_&&function(e){var n=e===i.PaginationPosition.TOP?i.PaginationPosition.BOTTOM:i.PaginationPosition.TOP;Q.get(n).current.value=""}(n)},ie={page:J,totalPages:Math.ceil(V/((null==X?void 0:X.value)||z)),onPrev:function(e){oe(J-1,e,i.ErrorBounds.START)},onNext:function(e){oe(J+1,e,i.ErrorBounds.END)},onGotoPage:function(e,n){oe(n,e,i.ErrorBounds.RANGE,!0)},getPaginationText:y,prevButtonText:D,nextButtonText:k,displayTextAs:B,onPrevError:R,onNextError:w,gotoPageButtonText:h,gotoPageLabel:S,onGotoPageError:M,enableGotoPage:_};return P.default.createElement("div",Object.assign({id:v,className:f.default("uitk-pagination",c)},O),P.default.createElement(m,{isEntriesSpecified:Boolean(p),"aria-label":"pagination "+i.PaginationPosition.TOP},p&&P.default.createElement(l.PaginationEntries,{id:"".concat(v,"_epp-top"),entriesPerPageConfig:p,onEntriesChange:Z,selectedEntriesPerPage:X}),P.default.createElement(s.PaginationNavigation,Object.assign({id:"".concat(v,"_navigation_top"),position:i.PaginationPosition.TOP,error:(null==ne?void 0:ne.position)===i.PaginationPosition.TOP&&ne,gotoInputRef:null==Q?void 0:Q.get(i.PaginationPosition.TOP)},ie))),P.default.createElement(T,null,"function"==typeof r?r({page:J,pageSize:(null==X?void 0:X.value)||z}):r),P.default.createElement(m,{isEntriesSpecified:Boolean(p),"aria-label":"pagination "+i.PaginationPosition.BOTTOM},p&&P.default.createElement(l.PaginationEntries,{id:"".concat(v,"_epp-bottom"),entriesPerPageConfig:p,onEntriesChange:Z,selectedEntriesPerPage:X}),P.default.createElement(s.PaginationNavigation,Object.assign({id:"".concat(v,"_navigation_bottom"),position:i.PaginationPosition.BOTTOM,error:(null==ne?void 0:ne.position)===i.PaginationPosition.BOTTOM&&ne,gotoInputRef:null==Q?void 0:Q.get(i.PaginationPosition.BOTTOM)},ie))))},x=d.default(E).withConfig({displayName:"Paginationcomponent__Pagination",componentId:"eld2ko-2"})(["display:flex;flex-direction:column;"]);exports.Pagination=x;
